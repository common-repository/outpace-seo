!function(a){var c=!1,s={init:function(){s.bindUIActions(),setTimeout(s.alertFunc,200)},bindUIActions:function(){a(document).on("click",".outpaceseo_run",function(e){s.runBluckUpdater(this,e)}),a(document).on("click",".outpaceseo_test",function(e){s.testBluckUpdater(this,e)}),a(document).on("click",".outpaceseo_stop",function(e){s.stopBluckUpdater(this,e)}),a(document).on("click",".outpaceseo_reset",function(e){s.resetCounter(this,e)}),a(document).on("change",".outpace_script_pagetrack select",function(e){s.selectVal(this,e)}),a(document).on("change",".only-specific select",function(e){s.selectValPagePost(this,e)}),a(document).on("click",".outpaceseo-schema-temp-wrap",function(e){s.clickSchema(this,e)})},clickSchema:function(e,o){var e=a(e),t=(a(".outpaceseo-schema-temp-wrap").removeClass("selected"),a(".outpaceseo-schema-setup-actions").find(".button-next").removeAttr("disabled"),e.addClass("selected"),e.data("schema-type")),e=e.data("schema-title");a(document).find(".outpaceseo-schema-type").val(t),a(document).find(".outpaceseo-schema-title").val(e)},selectVal:function(e,o){var e=a(e).val(),t=a(".only-specific select").val();"specific"==e?(a(".only-specific").show(),"page"==t?(a(".posts").hide(),a(".pages").show()):"post"==t&&(a(".pages").hide(),a(".posts").show())):(a(".only-specific").hide(),a(".posts").hide(),a(".pages").hide())},selectValPagePost:function(e,o){var e=a(e).val(),t=a(".outpace_script_pagetrack select").val();"specific"==t&&"page"==e?(a(".pages").show(),a(".posts").hide()):"specific"==t&&"post"==e&&(a(".posts").show(),a(".pages").hide())},alertFunc:function(){var e=a("#codeAce").html(),t=(e=s.RoshanReplace(e,"&lt;","<"),e=s.RoshanReplace(e,"&gt;",">"),e=s.RoshanReplace(e,"&amp;","&"),ace.edit("codeAce"));t.renderer.setShowGutter(!1),t.setTheme("ace/theme/monokai"),t.getSession().setMode("ace/mode/html"),t.getSession().setUseSoftTabs(!0),t.getSession().setUseWrapMode(!0),t.session.setUseWorker(!1),t.setValue(e),a("#codeAce").focusout(function(){var e=a("#code"),o=t.getValue();e.val(o)}),a("#codeAce").trigger("focusout")},RoshanReplace:function(e,o,t){try{return e.split(o).join(t)}catch(s){if(s)return e}},runBluckUpdater:function(e,o){a.confirm({title:!1,theme:"modern",content:outpaceseo_params.run_text,backgroundDismiss:!1,boxWidth:"500px",useBootstrap:!1,closeIcon:!1,icon:"dashicons dashicons-info",type:"orange",buttons:{confirm:{text:outpaceseo_params.i18n_outpaceseo_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){s.outpaceseoBulkUpdater()}},cancel:{text:outpaceseo_params.i18n_outpaceseo_cancel}}})},testBluckUpdater:function(e,o){a.confirm({title:!1,theme:"modern",content:outpaceseo_params.test_text,backgroundDismiss:!1,boxWidth:"500px",useBootstrap:!1,closeIcon:!1,icon:"dashicons dashicons-info",type:"orange",buttons:{confirm:{text:outpaceseo_params.i18n_outpaceseo_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){s.outpaceseoBulkUpdater(!0)}},cancel:{text:outpaceseo_params.i18n_outpaceseo_cancel}}})},stopBluckUpdater:function(){c=!0},resetCounter:function(){a.confirm({title:!1,theme:"modern",content:outpaceseo_params.reset_text,backgroundDismiss:!1,boxWidth:"500px",useBootstrap:!1,closeIcon:!1,icon:"dashicons dashicons-info",type:"orange",buttons:{confirm:{text:outpaceseo_params.i18n_outpaceseo_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){data={action:"outpaceseo_reset_bulk_updater_counter",security:outpaceseo_params.ajax_nonce},a.post(ajaxurl,data,function(e){a("#outpaceseo-log").append('<p class="outpaceseo-class-green"><span class="dashicons dashicons-yes"></span>'+e.message+"</p>"),a("#outpaceseo-log").append("<p>Number of Images Remaining: "+e.remaining_images+"</p>"),a("#outpaceseo-log").append("<p>Number of Images Updated: 0</p>"),a("#outpaceseo-log").animate({scrollTop:a("#outpaceseo-log")[0].scrollHeight-a("#outpaceseo-log").height()},200)})}},cancel:{text:outpaceseo_params.i18n_outpaceseo_cancel}}})},outpaceseoBulkUpdater:function(o=!1){var t=!(c=!1),s=(window.onfocus=function(){t=!0},window.onblur=function(){t=!1},a(".outpaceseo-spinner").addClass("spinner"),a(".outpaceseo_stop").prop("disabled",!1),a(".outpaceseo_stop").removeClass("button-secondary"),a(".outpaceseo_stop").addClass("button-primary"),a("#outpaceseo-log").append('<p class="outpaceseo-class-green"><span class="dashicons dashicons-controls-play"></span>Initializing bulk updater. Please be patient and do not close the browser while it\'s running. In case you do, you can always resume by returning to this page later.</p>'),a("#outpaceseo-log").animate({scrollTop:a("#outpaceseo-log")[0].scrollHeight-a("#outpaceseo-log").height()},200),data={action:"outpaceseo_count_remaining_images"},s=null);a.post(ajaxurl,data,function(e){s=e.data}).done(function e(){0<(s=!0===o&&1<s?1:s)&&!1===c?(data={action:"rename_old_image",security:outpaceseo_params.ajax_nonce},a.post(ajaxurl,data,function(e){a("#outpaceseo-log").append("<p>"+e+"</p>"),!1===o&&a("#outpaceseo-log").append("<p>Images remaining: "+(s-1)+"</p>"),(a("#outpaceseo-log").prop("scrollHeight")-(a("#outpaceseo-log").scrollTop()+a("#outpaceseo-log").height())<100||0==t)&&a("#outpaceseo-log").animate({scrollTop:a("#outpaceseo-log")[0].scrollHeight-a("#outpaceseo-log").height()},100)}).done(function(){s--,e()})):(!1===c?a("#outpaceseo-log").append('<p class="outpaceseo-class-green"><span class="dashicons dashicons-yes"></span>All done!</p>'):a("#outpaceseo-log").append('<p class="outpaceseo-class-red"><span class="dashicons dashicons-dismiss"></span>Operation aborted by user.</p>'),a("#outpaceseo-log").animate({scrollTop:a("#outpaceseo-log")[0].scrollHeight-a("#outpaceseo-log").height()},200),a(".outpaceseo-spinner").removeClass("spinner"),a(".outpaceseo_stop").removeClass("button-primary"),a(".outpaceseo_stop").addClass("button-secondary"),a(".outpaceseo_stop").prop("disabled",!0))})}};s.init()}(jQuery);